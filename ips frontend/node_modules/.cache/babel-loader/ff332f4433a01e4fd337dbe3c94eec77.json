{"ast":null,"code":"var _jsxFileName = \"/home/gungorerhan/Dev/bluetooth-localization/ips frontend/src/components/Livelocation.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Persons from './Persons';\nimport Now from './Now';\nimport './Livelocation.css';\n\nclass Livelocation extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      persons: []\n    };\n\n    this.show_info = id => {\n      document.getElementById(id).className = 'show_info';\n    };\n\n    this.hide_info = id => {\n      document.getElementById(id).className = 'no_show_info';\n    };\n\n    this.get_locations = () => {\n      axios.get(`https://t7ftvwr8bi.execute-api.eu-central-1.amazonaws.com/cors/position/live`).then(res => {\n        const data = res.data;\n        var keys = Object.keys(data);\n        var values = Object.values(data);\n        let temp_persons = [];\n\n        for (var i = 0; i < keys.length; i++) {\n          var person = {\n            person_id: keys[i],\n            card_id: values[i].cardId,\n            person_name: values[i].firstName,\n            person_surname: values[i].lastName,\n            x_position: values[i].x,\n            y_position: values[i].y,\n            condition: 'no_show_info'\n          };\n          let persons = [...temp_persons, person];\n          temp_persons = persons;\n        }\n\n        this.setState({\n          persons: temp_persons\n        });\n      });\n    };\n  }\n\n  // api call every 3 seconds\n  componentDidMount() {\n    this.get_locations();\n    this.interval_get_pos = setInterval(this.get_locations, 3000);\n  } // stop api calling\n\n\n  componentWillUnmount() {\n    clearInterval(this.interval_get_pos);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Real time locations\"), React.createElement(Now, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"floor_plan\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(Persons, {\n      persons: this.state.persons,\n      show_info: this.show_info,\n      hide_info: this.hide_info,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Livelocation;","map":{"version":3,"sources":["/home/gungorerhan/Dev/bluetooth-localization/ips frontend/src/components/Livelocation.js"],"names":["React","Component","axios","Persons","Now","Livelocation","state","persons","show_info","id","document","getElementById","className","hide_info","get_locations","get","then","res","data","keys","Object","values","temp_persons","i","length","person","person_id","card_id","cardId","person_name","firstName","person_surname","lastName","x_position","x","y_position","y","condition","setState","componentDidMount","interval_get_pos","setInterval","componentWillUnmount","clearInterval","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,OAAO,oBAAP;;AAGA,MAAMC,YAAN,SAA2BJ,SAA3B,CAAoC;AAAA;AAAA;AAAA,SAEhCK,KAFgC,GAExB;AACJC,MAAAA,OAAO,EAAE;AADL,KAFwB;;AAAA,SAOhCC,SAPgC,GAOnBC,EAAD,IAAQ;AAChBC,MAAAA,QAAQ,CAACC,cAAT,CAAwBF,EAAxB,EAA4BG,SAA5B,GAAwC,WAAxC;AACH,KAT+B;;AAAA,SAUhCC,SAVgC,GAUnBJ,EAAD,IAAQ;AAChBC,MAAAA,QAAQ,CAACC,cAAT,CAAwBF,EAAxB,EAA4BG,SAA5B,GAAwC,cAAxC;AACH,KAZ+B;;AAAA,SAehCE,aAfgC,GAehB,MAAK;AACjBZ,MAAAA,KAAK,CAACa,GAAN,CAAW,8EAAX,EACSC,IADT,CACcC,GAAG,IAAI;AACb,cAAMC,IAAI,GAAGD,GAAG,CAACC,IAAjB;AACA,YAAIC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYD,IAAZ,CAAX;AACA,YAAIG,MAAM,GAAGD,MAAM,CAACC,MAAP,CAAcH,IAAd,CAAb;AACA,YAAII,YAAY,GAAG,EAAnB;;AAEA,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,IAAI,CAACK,MAAzB,EAAiCD,CAAC,EAAlC,EAAqC;AACjC,cAAIE,MAAM,GAAG;AACTC,YAAAA,SAAS,EAAEP,IAAI,CAACI,CAAD,CADN;AAETI,YAAAA,OAAO,EAAEN,MAAM,CAACE,CAAD,CAAN,CAAUK,MAFV;AAGTC,YAAAA,WAAW,EAAER,MAAM,CAACE,CAAD,CAAN,CAAUO,SAHd;AAITC,YAAAA,cAAc,EAAEV,MAAM,CAACE,CAAD,CAAN,CAAUS,QAJjB;AAKTC,YAAAA,UAAU,EAAEZ,MAAM,CAACE,CAAD,CAAN,CAAUW,CALb;AAMTC,YAAAA,UAAU,EAAEd,MAAM,CAACE,CAAD,CAAN,CAAUa,CANb;AAOTC,YAAAA,SAAS,EAAE;AAPF,WAAb;AASA,cAAI9B,OAAO,GAAG,CAAC,GAAGe,YAAJ,EAAkBG,MAAlB,CAAd;AACAH,UAAAA,YAAY,GAAGf,OAAf;AACH;;AAED,aAAK+B,QAAL,CAAc;AACV/B,UAAAA,OAAO,EAAEe;AADC,SAAd;AAIH,OAzBL;AA0BH,KA1C+B;AAAA;;AA4ChC;AACAiB,EAAAA,iBAAiB,GAAG;AAChB,SAAKzB,aAAL;AACA,SAAK0B,gBAAL,GAAwBC,WAAW,CAAC,KAAK3B,aAAN,EAAqB,IAArB,CAAnC;AACH,GAhD+B,CAkDhC;;;AACA4B,EAAAA,oBAAoB,GAAE;AAClBC,IAAAA,aAAa,CAAC,KAAKH,gBAAN,CAAb;AACH;;AAGDI,EAAAA,MAAM,GAAE;AACJ,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADJ,EAEI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAGI;AAAK,MAAA,EAAE,EAAC,YAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,OAAD;AAAS,MAAA,OAAO,EAAI,KAAKtC,KAAL,CAAWC,OAA/B;AAAwC,MAAA,SAAS,EAAE,KAAKC,SAAxD;AAAmE,MAAA,SAAS,EAAE,KAAKK,SAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAHJ,CADJ;AASH;;AAlE+B;;AAqEpC,eAAeR,YAAf","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport Persons from './Persons';\nimport Now from './Now';\nimport './Livelocation.css';\n\n\nclass Livelocation extends Component{\n\n    state = {\n        persons: []\n    }\n    \n    // adjust info div\n    show_info = (id) => {\n        document.getElementById(id).className = 'show_info'; \n    }\n    hide_info = (id) => {\n        document.getElementById(id).className = 'no_show_info';\n    }\n    \n    // get current locations from server\n    get_locations = () =>{\n        axios.get(`https://t7ftvwr8bi.execute-api.eu-central-1.amazonaws.com/cors/position/live`)\n                .then(res => {\n                const data = res.data;\n                var keys = Object.keys(data);\n                var values = Object.values(data);\n                let temp_persons = [];\n                \n                for (var i = 0; i < keys.length; i++){\n                    var person = {\n                        person_id: keys[i],\n                        card_id: values[i].cardId,\n                        person_name: values[i].firstName,\n                        person_surname: values[i].lastName,\n                        x_position: values[i].x,\n                        y_position: values[i].y,\n                        condition: 'no_show_info'\n                    }\n                    let persons = [...temp_persons, person];\n                    temp_persons = persons;\n                }\n\n                this.setState({\n                    persons: temp_persons\n                })\n                \n            })\n    }\n\n    // api call every 3 seconds\n    componentDidMount() {\n        this.get_locations();\n        this.interval_get_pos = setInterval(this.get_locations, 3000);\n    }\n\n    // stop api calling\n    componentWillUnmount(){\n        clearInterval(this.interval_get_pos);\n    }\n    \n    \n    render(){\n        return(\n            <div>\n                <h1 className=\"title\">Real time locations</h1>\n                <Now></Now>\n                <div id=\"floor_plan\">\n                    <Persons persons = {this.state.persons} show_info={this.show_info} hide_info={this.hide_info}></Persons>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Livelocation"]},"metadata":{},"sourceType":"module"}